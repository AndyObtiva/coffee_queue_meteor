<head>
  <title>CoffeeQueue (Meteor Edition)</title>
  <link href='http://fonts.googleapis.com/css?family=Russo+One' rel='stylesheet' type='text/css'>
</head>

<body>
  <div id="body-content">
    {{> barista}}
    {{> order}}
    {{> stats}}
    {{> orders}}
  </div>
</body>

<template name="barista">
  <div id="barista_actions" class="main-lane box">
    <h1>CoffeeQueue</h1>
    <h2>Express Coffee Service</h2>
    {{> loginButtons}}
  </div>
</template>

<template name="order">
  <div id="coffee_request_form" class="main-lane box">
    <form id="orderForm">
      <div class="row">
        <input id="name" type="text" placeholder="Enter Name">
      </div>
      <div class="row">
        <select id="productName">
          {{#each products}}
          <option>{{name}}</option>
          {{/each}}
        </select>
        <select id="productOptionName">
          {{#each productOptions}}
          <option>{{name}}</option>
          {{/each}}
        </select>
        <input type="submit" value="Request Coffee">
      </div>
    </form>
  </div>
</template>

<template name="orders">
  <div id="order_list" class="main-lane">
    <div id="waiting" class="step box">
      <h1>Waiting for Order</h1>
      {{#if noOrdersInProgress}}
      <p>No orders are currently in progress. Faster than the line!</p>
      {{/if}}
      <table>
        {{#each ordersInProgress}}
        <tr>
          <td>
            {{name}}
          </td>
          <td>
            ({{product.name}} - {{productOption.name}})
          </td>
          <td>
            {{#if currentUser}}
              <!-- assumes name is unique at the moment TODO handle implications/scaling to non-unique names -->
              <input type="button" value="Fulfill" data-name="{{name}}" data-id="{{_id}}">
            {{/if}}
          </td>
        </tr>
        {{/each}}
      </table>
    </div>
    <div id="ready" class="step box">
      <h1>Ready for Pickup</h1>
      <table>
        {{#each readyOrders}}
        <tr>
          <td>
            {{name}}
          </td>
          <td>
            ({{product.name}} - {{productOption.name}})
          </td>
          <td>
            {{#if currentUser}}
              <!-- assumes name is unique at the moment TODO handle implications/scaling to non-unique names -->
              <input type="button" value="Serve" data-name="{{name}}" data-id="{{_id}}">
            {{/if}}
          </td>
        </tr>
        {{/each}}
      </table>
    </div>
  </div>
</template>

<template name="stats">
  <div id="stats" class="main-lane box">
    <ul>
      <li>
        Average Wait Time in the Last Hour:<br>
        {{averageWaitTime}} Seconds
      </li>
      {{#if fastestBarista}}
      <li>
        Fastest Barista in the Last Hour:<br>
        <span class="username">
          {{fastestBarista.username}}
        </span>
        <span class="email">
          &lt; {{fastestBarista.emailAddress}} &gt;
        </span>

        <span class="fastestTime">
          {{fastestBarista.fastestTime}} seconds
        </span>
      </li>
      {{/if}}
    </ul>
  </div>
</template>
