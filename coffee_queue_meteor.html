<head>
  <title>CoffeeQueue (Meteor Edition)</title>
</head>

<body>
  <div id="barista_sign_in_form">
    {{> barista}}
  </div>
  <div id="order_form">
    {{> order}}
  </div>
  <div id="order_list">
    {{> orders}}
  </div>
  <div id="stats">
    {{> stats}}
  </div>
</body>

<template name="order">
  <form id="orderForm">
    <input id="name" type="text" placeholder="Enter Name" required>
    <select id="productName">
      {{#each products}}
      <option>{{name}}</option>
      {{/each}}
    </select>
    <select id="productOptionName">
      {{#each productOptions}}
      <option>{{name}}</option>
      {{/each}}
    </select>
    <input type="submit" value="Submit Coffee Order">
  </form>
</template>

<template name="orders">
  <h1>Orders In Progress</h1>
  {{#if noOrdersInProgress}}
    <p>No orders are currently in progress. Faster than the line!</p>
  {{/if}}
  <ul>
    {{#each ordersInProgress}}
    <li>
      {{#if currentUser}}
        <!-- assumes name is unique at the moment TODO handle implications/scaling to non-unique names -->
        <input type="button" value="Fulfill" id="{{name}}"> -
      {{/if}}
      {{name}} - {{product.name}} - {{productOption.name}} - Placed at {{createdAt}}
    </li>
    {{/each}}
  </ul>
  <h1>Orders Ready for Pickup</h1>
  <ul>
    {{#each readyOrders}}
    <li>
      {{name}} - {{product.name}} - {{productOption.name}} - Fulfilled at {{fulfilledAt}}
    </li>
    {{/each}}
  </ul>

</template>

<template name="stats">
  <h1>Stats</h1>
  Average Time to Fulfill Order:
  {{averageWaitTime}} Seconds
</template>

<template name="barista">
  {{loginButtons}}
</template>

